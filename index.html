<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ç‹—å˜è‰²é­”æœ¯ - Color Game</title>
    <style>
        :root { --brown: #6d4c41; }
        body { font-family: 'PingFang SC', sans-serif; background-color: #fff9c4; text-align: center; margin: 0; padding: 20px; overflow-x: hidden; }
        
        /* ç‹—ç‹—åŠ¨ç”»åŒºåŸŸ */
        .dog-stage { position: relative; height: 250px; margin-bottom: 20px; }
        .dog-img { width: 180px; cursor: pointer; transition: transform 0.1s; position: relative; z-index: 2; }
        .dog-img:active { transform: scale(0.95) translateY(5px); }
        
        /* æŠ–åŠ¨åŠ¨ç”» */
        .shaking { animation: shake 0.5s ease-in-out; }
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg) translateY(5px); }
            75% { transform: rotate(5deg) translateY(5px); }
        }

        /* æ‹‰ç²‘ç²‘åŠ¨ç”» */
        .poop-anim {
            position: absolute;
            width: 60px;
            left: 50%;
            top: 100px;
            margin-left: -80px; /* ä»ç‹—ç‹—å±è‚¡åé¢å‡ºæ¥ */
            z-index: 1;
            animation: shoot 0.8s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes shoot {
            0% { transform: scale(0) translate(0, 0); opacity: 1; }
            100% { transform: scale(1) translate(-20px, 150px); opacity: 0; } /* é£å‘æ ¼å­çš„åŠ¨ç”» */
        }

        /* æ¸¸æˆç½‘æ ¼ */
        .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; max-width: 900px; margin: 0 auto; }
        .slot { border: 3px dashed #bcaaa4; border-radius: 15px; padding: 10px; background: white; min-height: 120px; transition: 0.3s; }
        .slot.active { border-style: solid; border-color: #795548; background-color: #fff; }
        .slot img { width: 80px; opacity: 0; transition: opacity 0.5s; }
        .slot.revealed img { opacity: 1; }
        .slot.correct { background-color: #e8f5e9; border-color: #4caf50; }

        /* æ ‡ç­¾åº“ */
        .word-bank { margin-top: 30px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 20px; background: rgba(255,255,255,0.7); border-radius: 20px; }
        .word { background: var(--brown); color: white; padding: 8px 15px; border-radius: 8px; cursor: grab; font-size: 1.1em; }
        .word.hidden { visibility: hidden; }
        .pinyin { font-size: 0.6em; display: block; }
    </style>
</head>
<body>

    <h1>ğŸ¶ ç‚¹å‡»ç‹—ç‹—æ‹‰å‡ºé¢œè‰²ï¼ğŸ’©</h1>
    <p>ç‚¹å‡»å°ç‹—ï¼Œçœ‹çœ‹å®ƒæ‹‰å‡ºäº†ä»€ä¹ˆé¢œè‰²ï¼Œç„¶åæŠŠè¯è¯­æ‹–ä¸Šå»ï¼</p>

    <div class="dog-stage">
        <img src="dog.png" id="dog" class="dog-img" onclick="makePoop()" alt="Dog">
    </div>

    <div class="grid" id="grid"></div>
    <div id="message" style="font-size: 2em; margin: 20px; height: 40px; color: #d32f2f;"></div>
    <div class="word-bank" id="wordBank"></div>

    <script>
        const colors = [
            { name: 'çº¢è‰²', py: 'hÃ³ng sÃ¨', file: 'red.png' },
            { name: 'ç»¿è‰²', py: 'lÇœ sÃ¨', file: 'green.png' },
            { name: 'è“è‰²', py: 'lÃ¡n sÃ¨', file: 'blue.png' },
            { name: 'é»„è‰²', py: 'huÃ¡ng sÃ¨', file: 'yellow.png' },
            { name: 'é»‘è‰²', py: 'hÄ“i sÃ¨', file: 'black.png' },
            { name: 'ç™½è‰²', py: 'bÃ¡i sÃ¨', file: 'white.png' },
            { name: 'æ£•è‰²', py: 'zÅng sÃ¨', file: 'brown.png' },
            { name: 'ç´«è‰²', py: 'zÇ sÃ¨', file: 'purple.png' },
            { name: 'ç²‰è‰²', py: 'fÄ›n sÃ¨', file: 'pink.png' },
            { name: 'æ©™è‰²', py: 'chÃ©ng sÃ¨', file: 'orange.png' }
        ];

        let revealedCount = 0;
        let matchedCount = 0;
        const availableColors = [...colors];

        // åˆå§‹åŒ–æ ¼å­
        const grid = document.getElementById('grid');
        colors.forEach(c => {
            const div = document.createElement('div');
            div.className = 'slot';
            div.id = 'slot-' + c.name;
            div.innerHTML = `<img src="${c.file}" id="img-${c.name}">`;
            
            div.ondragover = e => e.preventDefault();
            div.ondrop = e => {
                const name = e.dataTransfer.getData('text');
                if(name === c.name && div.classList.contains('revealed')) {
                    div.classList.add('correct');
                    document.getElementById('word-' + name).classList.add('hidden');
                    matchedCount++;
                    if(matchedCount === colors.length) document.getElementById('message').innerText = "ğŸŠ å¤ªç‰›äº†ï¼æ¸…ç†å®Œæ¯•ï¼";
                }
            };
            grid.appendChild(div);
        });

        // åˆå§‹åŒ–è¯åº“
        const bank = document.getElementById('wordBank');
        [...colors].sort(() => Math.random() - 0.5).forEach(c => {
            const div = document.createElement('div');
            div.className = 'word';
            div.id = 'word-' + c.name;
            div.draggable = true;
            div.innerHTML = `<span class="pinyin">${c.py}</span>${c.name}`;
            div.ondragstart = e => e.dataTransfer.setData('text', c.name);
            bank.appendChild(div);
        });

        // ç‚¹å‡»ç‹—ç‹—æ‹‰ç²‘ç²‘
        function makePoop() {
            if (availableColors.length === 0) return;

            const dog = document.getElementById('dog');
            dog.classList.add('shaking');
            setTimeout(() => dog.classList.remove('shaking'), 500);

            // éšæœºå–ä¸€ä¸ªè¿˜æ²¡å‡ºç°çš„é¢œè‰²
            const index = Math.floor(Math.random() * availableColors.length);
            const color = availableColors.splice(index, 1)[0];

            // åˆ›å»ºåŠ¨ç”»å…ƒç´ 
            const poop = document.createElement('img');
            poop.src = color.file;
            poop.className = 'poop-anim';
            document.querySelector('.dog-stage').appendChild(poop);

            // åŠ¨ç”»ç»“æŸåæ˜¾ç¤ºæ ¼å­é‡Œçš„é¢œè‰²
            setTimeout(() => {
                poop.remove();
                const slot = document.getElementById('slot-' + color.name);
                slot.classList.add('revealed');
                slot.classList.add('active');
            }, 700);
        }
    </script>
</body>
</html>
