<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼šè¯´è¯çš„å°ç‹—å˜è‰²é­”æœ¯</title>
    <style>
        :root { --brown: #6d4c41; }
        body { font-family: 'PingFang SC', sans-serif; background-color: #fff9c4; text-align: center; margin: 0; padding: 20px; overflow-x: hidden; }
        
        .dog-stage { position: relative; height: 250px; margin-bottom: 20px; }
        .dog-img { width: 180px; cursor: pointer; transition: transform 0.1s; position: relative; z-index: 2; }
        .dog-img:active { transform: scale(0.95) translateY(5px); }
        
        .shaking { animation: shake 0.5s ease-in-out; }
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg) translateY(5px); }
            75% { transform: rotate(5deg) translateY(5px); }
        }

        .poop-anim {
            position: absolute; width: 60px; left: 50%; top: 100px; margin-left: -80px; z-index: 1;
            animation: shoot 0.8s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes shoot {
            0% { transform: scale(0) translate(0, 0); opacity: 1; }
            100% { transform: scale(1) translate(-20px, 150px); opacity: 0; }
        }

        .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; max-width: 900px; margin: 0 auto; }
        .slot { border: 3px dashed #bcaaa4; border-radius: 15px; padding: 10px; background: white; min-height: 120px; transition: 0.3s; }
        .slot.active { border-style: solid; border-color: #795548; }
        .slot img { width: 80px; opacity: 0; transition: opacity 0.5s; }
        .slot.revealed img { opacity: 1; }
        .slot.correct { background-color: #e8f5e9; border-color: #4caf50; }

        .word-bank { margin-top: 30px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 20px; background: rgba(255,255,255,0.7); border-radius: 20px; }
        .word { background: var(--brown); color: white; padding: 8px 15px; border-radius: 8px; cursor: grab; font-size: 1.1em; }
        .word.hidden { visibility: hidden; }
        .pinyin { font-size: 0.6em; display: block; }

        #message { margin-top: 25px; font-size: 2em; color: #d32f2f; font-weight: bold; height: 45px; }
    </style>
</head>
<body>

    <h1>ğŸ¶ ä¼šè¯´è¯çš„å°ç‹—é­”æœ¯ ğŸ¤</h1>
    <p>ç‚¹å‡»å°ç‹—å¬å£°éŸ³ï¼Œç„¶åæ‹–åŠ¨å•è¯åŒ¹é…ï¼</p>

    <div class="dog-stage">
        <img src="dog.png" id="dog" class="dog-img" onclick="makePoop()" alt="Dog">
    </div>

    <div class="grid" id="grid"></div>
    <div id="message"></div>
    <div class="word-bank" id="wordBank"></div>

    <script>
        const colors = [
            { name: 'çº¢è‰²', py: 'hÃ³ng sÃ¨', file: 'red.png' },
            { name: 'ç»¿è‰²', py: 'lÇœ sÃ¨', file: 'green.png' },
            { name: 'è“è‰²', py: 'lÃ¡n sÃ¨', file: 'blue.png' },
            { name: 'é»„è‰²', py: 'huÃ¡ng sÃ¨', file: 'yellow.png' },
            { name: 'é»‘è‰²', py: 'hÄ“i sÃ¨', file: 'black.png' },
            { name: 'ç™½è‰²', py: 'bÃ¡i sÃ¨', file: 'white.png' },
            { name: 'æ£•è‰²', py: 'zÅng sÃ¨', file: 'brown.png' },
            { name: 'ç´«è‰²', py: 'zÇ sÃ¨', file: 'purple.png' },
            { name: 'ç²‰è‰²', py: 'fÄ›n sÃ¨', file: 'pink.png' },
            { name: 'æ©™è‰²', py: 'chÃ©ng sÃ¨', file: 'orange.png' }
        ];

        let matchedCount = 0;
        const availableColors = [...colors];

        // --- æœ—è¯»åŠŸèƒ½å‡½æ•° ---
        function speak(text) {
            const msg = new SpeechSynthesisUtterance();
            msg.text = text;
            msg.lang = 'zh-CN'; // è®¾ç½®ä¸ºä¸­æ–‡
            msg.rate = 0.8;      // è¯­é€Ÿç¨å¾®æ…¢ä¸€ç‚¹ï¼Œæ–¹ä¾¿å­¦ç”Ÿå¬æ¸…
            window.speechSynthesis.speak(msg);
        }

        // åˆå§‹åŒ–æ ¼å­
        const grid = document.getElementById('grid');
        colors.forEach(c => {
            const div = document.createElement('div');
            div.className = 'slot';
            div.id = 'slot-' + c.name;
            div.innerHTML = `<img src="${c.file}">`;
            div.ondragover = e => e.preventDefault();
            div.ondrop = e => {
                const name = e.dataTransfer.getData('text');
                const slot = document.getElementById('slot-' + c.name);
                if(name === c.name && slot.classList.contains('revealed')) {
                    slot.classList.add('correct');
                    document.getElementById('word-' + name).classList.add('hidden');
                    speak("æ­£ç¡®ï¼"); // åŒ¹é…æ­£ç¡®æœ—è¯»
                    matchedCount++;
                    if(matchedCount === colors.length) {
                        document.getElementById('message').innerText = "ğŸŠ å¤ªæ£’äº†ï¼å…¨éƒ¨å®Œæˆï¼";
                        speak("å¤ªæ£’äº†ï¼ä½ å…¨éƒ½æ‰¾å¯¹äº†ï¼");
                    }
                }
            };
            grid.appendChild(div);
        });

        // åˆå§‹åŒ–è¯åº“
        const bank = document.getElementById('wordBank');
        [...colors].sort(() => Math.random() - 0.5).forEach(c => {
            const div = document.createElement('div');
            div.className = 'word';
            div.id = 'word-' + c.name;
            div.draggable = true;
            div.innerHTML = `<span class="pinyin">${c.py}</span>${c.name}`;
            div.ondragstart = e => e.dataTransfer.setData('text', c.name);
            bank.appendChild(div);
        });

        // ç‚¹å‡»ç‹—ç‹—åŠ¨ä½œ
        function makePoop() {
            if (availableColors.length === 0) return;

            const dog = document.getElementById('dog');
            dog.classList.add('shaking');
            setTimeout(() => dog.classList.remove('shaking'), 500);

            const index = Math.floor(Math.random() * availableColors.length);
            const color = availableColors.splice(index, 1)[0];

            const poop = document.createElement('img');
            poop.src = color.file;
            poop.className = 'poop-anim';
            document.querySelector('.dog-stage').appendChild(poop);

            // æ‹‰å‡ºæ¥æ—¶æœ—è¯»é¢œè‰²å
            speak(color.name);

            setTimeout(() => {
                poop.remove();
                const slot = document.getElementById('slot-' + color.name);
                slot.classList.add('revealed');
                slot.classList.add('active');
            }, 700);
        }
    </script>
</body>
</html>
